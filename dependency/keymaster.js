/* keymaster - A simple micro-library for defining and dispatching keyboard shortcuts. It has no dependencies. */
(function(e){function u(e){var t,o,u,a,l,c;o=(e.target||e.srcElement).tagName;t=e.keyCode;if(t==93||t==224)t=91;if(t in r){r[t]=true;for(a in s)if(s[a]==t)f[a]=true;return}if(o=="INPUT"||o=="SELECT"||o=="TEXTAREA")return;if(!(t in n))return;for(l=0;l<n[t].length;l++){u=n[t][l];if(u.scope==i||u.scope=="all"){c=u.mods.length>0;for(a in r)if(!r[a]&&u.mods.indexOf(+a)>-1||r[a]&&u.mods.indexOf(+a)==-1)c=false;if(u.mods.length==0&&!r[16]&&!r[18]&&!r[17]&&!r[91]||c){if(u.method(e,u.key,u.scope)===false){if(e.preventDefault)e.preventDefault();else e.returnValue=false;if(e.stopPropagation)e.stopPropagation();if(e.cancelBubble)e.cancelBubble=true}}}}}function a(e){var t=e.keyCode,n;if(t==93||t==224)t=91;if(t in r){r[t]=false;for(n in s)if(s[n]==t)f[n]=false}}function f(e,t,r){var i,u,a,f;if(r===undefined){r=t;t="all"}e=e.replace(/\s/g,"");i=e.split(",");for(a=0;a<i.length;a++){u=[];e=i[a].split("+");if(e.length>1){u=e.slice(0,e.length-1);for(f=0;f<u.length;f++)u[f]=s[u[f]];e=[e[e.length-1]]}e=e[0];e=e.length>1?o[e]:e.toUpperCase().charCodeAt(0);if(!(e in n))n[e]=[];n[e].push({scope:t,method:r,key:i[a],mods:u})}}function l(e){i=e||"all"}function c(e,t,n){if(e.addEventListener)e.addEventListener(t,n,false);else if(e.attachEvent)e.attachEvent("on"+t,function(){n(window.event)})}var t,n={},r={16:false,18:false,17:false,91:false},i="all",s={"⇧":16,shift:16,option:18,"⌥":18,alt:18,ctrl:17,control:17,command:91,"⌘":91},o={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34};for(t=1;t<20;t++)s["f"+t]=111+t;for(t in s)f[t]=false;c(document,"keydown",u);c(document,"keyup",a);e.key=f;e.key.setScope=l})(this)
